Vagrant.configure('2') do |config|
  config.vm.define 'default' do |machine|
    machine.vm.box = 'phusion/ubuntu-14.04-amd64'

    machine.vm.provision 'docker' do |docker|
      docker.pull_images 'busybox'
      docker.pull_images 'ubuntu'
    end

    # Kill all open SSH connections to for vagrant to login again so it has access to the Docker group:
    machine.vm.provision 'shell', inline: "ps aux | grep sshd: | awk '{print $2}' | xargs kill"
  end
end
